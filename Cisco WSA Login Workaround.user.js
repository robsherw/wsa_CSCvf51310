// ==UserScript==
// @name         Cisco WSA Login Workaround
// @namespace    http://tampermonkey.net/
// @version      0.1
// @description  This script is a workaround for defects CSCvf51219/CSCvf51283
// @author       John Hess, Cisco Systems
// @match        https://*/*
// @match        http://*/*
// @grant        none
// @run-at       document-start
// ==/UserScript==

var NEW_SRC = "data:text/javascript;base64,LyoKQ29weXJpZ2h0IChjKSAyMDExLCBZYWhvbyEgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLgpDb2RlIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0QgTGljZW5zZToKaHR0cDovL2RldmVsb3Blci55YWhvby5jb20veXVpL2xpY2Vuc2UuaHRtbAp2ZXJzaW9uOiAyLjkuMAoqLwpZQUhPTy51dGlsLkNvbm5lY3Q9e19tc3htbF9wcm9naWQ6WyJNaWNyb3NvZnQuWE1MSFRUUCIsIk1TWE1MMi5YTUxIVFRQLjMuMCIsIk1TWE1MMi5YTUxIVFRQIl0sX2h0dHBfaGVhZGVyczp7fSxfaGFzX2h0dHBfaGVhZGVyczpmYWxzZSxfdXNlX2RlZmF1bHRfcG9zdF9oZWFkZXI6dHJ1ZSxfZGVmYXVsdF9wb3N0X2hlYWRlcjoiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IixfZGVmYXVsdF9mb3JtX2hlYWRlcjoiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIixfdXNlX2RlZmF1bHRfeGhyX2hlYWRlcjp0cnVlLF9kZWZhdWx0X3hocl9oZWFkZXI6IlhNTEh0dHBSZXF1ZXN0IixfaGFzX2RlZmF1bHRfaGVhZGVyczp0cnVlLF9pc0Zvcm1TdWJtaXQ6ZmFsc2UsX2RlZmF1bHRfaGVhZGVyczp7fSxfcG9sbDp7fSxfdGltZU91dDp7fSxfcG9sbGluZ19pbnRlcnZhbDo1MCxfdHJhbnNhY3Rpb25faWQ6MCxzdGFydEV2ZW50Om5ldyBZQUhPTy51dGlsLkN1c3RvbUV2ZW50KCJzdGFydCIpLGNvbXBsZXRlRXZlbnQ6bmV3IFlBSE9PLnV0aWwuQ3VzdG9tRXZlbnQoImNvbXBsZXRlIiksc3VjY2Vzc0V2ZW50Om5ldyBZQUhPTy51dGlsLkN1c3RvbUV2ZW50KCJzdWNjZXNzIiksZmFpbHVyZUV2ZW50Om5ldyBZQUhPTy51dGlsLkN1c3RvbUV2ZW50KCJmYWlsdXJlIiksYWJvcnRFdmVudDpuZXcgWUFIT08udXRpbC5DdXN0b21FdmVudCgiYWJvcnQiKSxfY3VzdG9tRXZlbnRzOntvblN0YXJ0Olsic3RhcnRFdmVudCIsInN0YXJ0Il0sb25Db21wbGV0ZTpbImNvbXBsZXRlRXZlbnQiLCJjb21wbGV0ZSJdLG9uU3VjY2VzczpbInN1Y2Nlc3NFdmVudCIsInN1Y2Nlc3MiXSxvbkZhaWx1cmU6WyJmYWlsdXJlRXZlbnQiLCJmYWlsdXJlIl0sb25VcGxvYWQ6WyJ1cGxvYWRFdmVudCIsInVwbG9hZCJdLG9uQWJvcnQ6WyJhYm9ydEV2ZW50IiwiYWJvcnQiXX0sc2V0UHJvZ0lkOmZ1bmN0aW9uKGEpe3RoaXMuX21zeG1sX3Byb2dpZC51bnNoaWZ0KGEpO30sc2V0RGVmYXVsdFBvc3RIZWFkZXI6ZnVuY3Rpb24oYSl7aWYodHlwZW9mIGE9PSJzdHJpbmciKXt0aGlzLl9kZWZhdWx0X3Bvc3RfaGVhZGVyPWE7dGhpcy5fdXNlX2RlZmF1bHRfcG9zdF9oZWFkZXI9dHJ1ZTt9ZWxzZXtpZih0eXBlb2YgYT09ImJvb2xlYW4iKXt0aGlzLl91c2VfZGVmYXVsdF9wb3N0X2hlYWRlcj1hO319fSxzZXREZWZhdWx0WGhySGVhZGVyOmZ1bmN0aW9uKGEpe2lmKHR5cGVvZiBhPT0ic3RyaW5nIil7dGhpcy5fZGVmYXVsdF94aHJfaGVhZGVyPWE7fWVsc2V7dGhpcy5fdXNlX2RlZmF1bHRfeGhyX2hlYWRlcj1hO319LHNldFBvbGxpbmdJbnRlcnZhbDpmdW5jdGlvbihhKXtpZih0eXBlb2YgYT09Im51bWJlciImJmlzRmluaXRlKGEpKXt0aGlzLl9wb2xsaW5nX2ludGVydmFsPWE7fX0sY3JlYXRlWGhyT2JqZWN0OmZ1bmN0aW9uKGcpe3ZhciBkLGEsYjt0cnl7YT1uZXcgWE1MSHR0cFJlcXVlc3QoKTtkPXtjb25uOmEsdElkOmcseGhyOnRydWV9O31jYXRjaChjKXtmb3IoYj0wO2I8dGhpcy5fbXN4bWxfcHJvZ2lkLmxlbmd0aDsrK2Ipe3RyeXthPW5ldyBBY3RpdmVYT2JqZWN0KHRoaXMuX21zeG1sX3Byb2dpZFtiXSk7ZD17Y29ubjphLHRJZDpnLHhocjp0cnVlfTticmVhazt9Y2F0Y2goZil7fX19ZmluYWxseXtyZXR1cm4gZDt9fSxnZXRDb25uZWN0aW9uT2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcy5fdHJhbnNhY3Rpb25faWQ7dHJ5e2lmKCFhKXtjPXRoaXMuY3JlYXRlWGhyT2JqZWN0KGQpO31lbHNle2M9e3RJZDpkfTtpZihhPT09InhkciIpe2MuY29ubj10aGlzLl90cmFuc3BvcnQ7Yy54ZHI9dHJ1ZTt9ZWxzZXtpZihhPT09InVwbG9hZCIpe2MudXBsb2FkPXRydWU7fX19aWYoYyl7dGhpcy5fdHJhbnNhY3Rpb25faWQrKzt9fWNhdGNoKGIpe31yZXR1cm4gYzt9LGFzeW5jUmVxdWVzdDpmdW5jdGlvbihoLGQsZyxhKXt2YXIgYj1nJiZnLmFyZ3VtZW50P2cuYXJndW1lbnQ6bnVsbCxlPXRoaXMsZixjO2lmKHRoaXMuX2lzRmlsZVVwbG9hZCl7Yz0idXBsb2FkIjt9ZWxzZXtpZihnJiZnLnhkcil7Yz0ieGRyIjt9fWY9dGhpcy5nZXRDb25uZWN0aW9uT2JqZWN0KGMpO2lmKCFmKXtyZXR1cm4gbnVsbDt9ZWxzZXtpZihnJiZnLmN1c3RvbWV2ZW50cyl7dGhpcy5pbml0Q3VzdG9tRXZlbnRzKGYsZyk7fWlmKHRoaXMuX2lzRm9ybVN1Ym1pdCl7aWYodGhpcy5faXNGaWxlVXBsb2FkKXt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2UudXBsb2FkRmlsZShmLGcsZCxhKTt9LDEwKTtyZXR1cm4gZjt9aWYoaC50b1VwcGVyQ2FzZSgpPT0iR0VUIil7aWYodGhpcy5fc0Zvcm1EYXRhLmxlbmd0aCE9PTApe2QrPSgoZC5pbmRleE9mKCI/Iik9PS0xKT8iPyI6IiYiKSt0aGlzLl9zRm9ybURhdGE7fX1lbHNle2lmKGgudG9VcHBlckNhc2UoKT09IlBPU1QiKXthPWE/dGhpcy5fc0Zvcm1EYXRhKyImIithOnRoaXMuX3NGb3JtRGF0YTt9fX1pZihoLnRvVXBwZXJDYXNlKCk9PSJHRVQiJiYoZyYmZy5jYWNoZT09PWZhbHNlKSl7ZCs9KChkLmluZGV4T2YoIj8iKT09LTEpPyI/IjoiJiIpKyJybmQ9IituZXcgRGF0ZSgpLnZhbHVlT2YoKS50b1N0cmluZygpO31pZih0aGlzLl91c2VfZGVmYXVsdF94aHJfaGVhZGVyKXtpZighdGhpcy5fZGVmYXVsdF9oZWFkZXJzWyJYLVJlcXVlc3RlZC1XaXRoIl0pe3RoaXMuaW5pdEhlYWRlcigiWC1SZXF1ZXN0ZWQtV2l0aCIsdGhpcy5fZGVmYXVsdF94aHJfaGVhZGVyLHRydWUpO319aWYoKGgudG9VcHBlckNhc2UoKT09PSJQT1NUIiYmdGhpcy5fdXNlX2RlZmF1bHRfcG9zdF9oZWFkZXIpJiZ0aGlzLl9pc0Zvcm1TdWJtaXQ9PT1mYWxzZSl7dGhpcy5pbml0SGVhZGVyKCJDb250ZW50LVR5cGUiLHRoaXMuX2RlZmF1bHRfcG9zdF9oZWFkZXIpO31pZihmLnhkcil7dGhpcy54ZHIoZixoLGQsZyxhKTtyZXR1cm4gZjt9Zi5jb25uLm9wZW4oaCxkLHRydWUpO2lmKHRoaXMuX2hhc19kZWZhdWx0X2hlYWRlcnN8fHRoaXMuX2hhc19odHRwX2hlYWRlcnMpe3RoaXMuc2V0SGVhZGVyKGYpO310aGlzLmhhbmRsZVJlYWR5U3RhdGUoZixnKTtmLmNvbm4uc2VuZChhfHwiIik7aWYodGhpcy5faXNGb3JtU3VibWl0PT09dHJ1ZSl7dGhpcy5yZXNldEZvcm1TdGF0ZSgpO310aGlzLnN0YXJ0RXZlbnQuZmlyZShmLGIpO2lmKGYuc3RhcnRFdmVudCl7Zi5zdGFydEV2ZW50LmZpcmUoZixiKTt9cmV0dXJuIGY7fX0saW5pdEN1c3RvbUV2ZW50czpmdW5jdGlvbihhLGMpe3ZhciBiO2ZvcihiIGluIGMuY3VzdG9tZXZlbnRzKXtpZih0aGlzLl9jdXN0b21FdmVudHNbYl1bMF0pe2FbdGhpcy5fY3VzdG9tRXZlbnRzW2JdWzBdXT1uZXcgWUFIT08udXRpbC5DdXN0b21FdmVudCh0aGlzLl9jdXN0b21FdmVudHNbYl1bMV0sKGMuc2NvcGUpP2Muc2NvcGU6bnVsbCk7YVt0aGlzLl9jdXN0b21FdmVudHNbYl1bMF1dLnN1YnNjcmliZShjLmN1c3RvbWV2ZW50c1tiXSk7fX19LGhhbmRsZVJlYWR5U3RhdGU6ZnVuY3Rpb24oYyxkKXt2YXIgYj10aGlzLGE9KGQmJmQuYXJndW1lbnQpP2QuYXJndW1lbnQ6bnVsbDtpZihkJiZkLnRpbWVvdXQpe3RoaXMuX3RpbWVPdXRbYy50SWRdPXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5hYm9ydChjLGQsdHJ1ZSk7fSxkLnRpbWVvdXQpO310aGlzLl9wb2xsW2MudElkXT13aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtpZihjLmNvbm4mJmMuY29ubi5yZWFkeVN0YXRlPT09NCl7d2luZG93LmNsZWFySW50ZXJ2YWwoYi5fcG9sbFtjLnRJZF0pO2RlbGV0ZSBiLl9wb2xsW2MudElkXTtpZihkJiZkLnRpbWVvdXQpe3dpbmRvdy5jbGVhclRpbWVvdXQoYi5fdGltZU91dFtjLnRJZF0pO2RlbGV0ZSBiLl90aW1lT3V0W2MudElkXTt9Yi5jb21wbGV0ZUV2ZW50LmZpcmUoYyxhKTtpZihjLmNvbXBsZXRlRXZlbnQpe2MuY29tcGxldGVFdmVudC5maXJlKGMsYSk7fWIuaGFuZGxlVHJhbnNhY3Rpb25SZXNwb25zZShjLGQpO319LHRoaXMuX3BvbGxpbmdfaW50ZXJ2YWwpO30saGFuZGxlVHJhbnNhY3Rpb25SZXNwb25zZTpmdW5jdGlvbihiLGosZCl7dmFyIGYsYSxoPShqJiZqLmFyZ3VtZW50KT9qLmFyZ3VtZW50Om51bGwsYz0oYi5yJiZiLnIuc3RhdHVzVGV4dD09PSJ4ZHI6c3VjY2VzcyIpP3RydWU6ZmFsc2UsaT0oYi5yJiZiLnIuc3RhdHVzVGV4dD09PSJ4ZHI6ZmFpbHVyZSIpP3RydWU6ZmFsc2Usaz1kO3RyeXtpZigoYi5jb25uLnN0YXR1cyE9PXVuZGVmaW5lZCYmYi5jb25uLnN0YXR1cyE9PTApfHxjKXtmPWIuY29ubi5zdGF0dXM7fWVsc2V7aWYoaSYmIWspe2Y9MDt9ZWxzZXtmPTEzMDMwO319fWNhdGNoKGcpe2Y9MTMwMzA7fWlmKChmPj0yMDAmJmY8MzAwKXx8Zj09PTEyMjN8fGMpe2E9Yi54ZHI/Yi5yOnRoaXMuY3JlYXRlUmVzcG9uc2VPYmplY3QoYixoKTtpZihqJiZqLnN1Y2Nlc3Mpe2lmKCFqLnNjb3BlKXtqLnN1Y2Nlc3MoYSk7fWVsc2V7ai5zdWNjZXNzLmFwcGx5KGouc2NvcGUsW2FdKTt9fXRoaXMuc3VjY2Vzc0V2ZW50LmZpcmUoYSk7aWYoYi5zdWNjZXNzRXZlbnQpe2Iuc3VjY2Vzc0V2ZW50LmZpcmUoYSk7fX1lbHNle3N3aXRjaChmKXtjYXNlIDEyMDAyOmNhc2UgMTIwMjk6Y2FzZSAxMjAzMDpjYXNlIDEyMDMxOmNhc2UgMTIxNTI6Y2FzZSAxMzAzMDphPXRoaXMuY3JlYXRlRXhjZXB0aW9uT2JqZWN0KGIudElkLGgsKGQ/ZDpmYWxzZSkpO2lmKGomJmouZmFpbHVyZSl7aWYoIWouc2NvcGUpe2ouZmFpbHVyZShhKTt9ZWxzZXtqLmZhaWx1cmUuYXBwbHkoai5zY29wZSxbYV0pO319YnJlYWs7ZGVmYXVsdDphPShiLnhkcik/Yi5yZXNwb25zZTp0aGlzLmNyZWF0ZVJlc3BvbnNlT2JqZWN0KGIsaCk7aWYoaiYmai5mYWlsdXJlKXtpZighai5zY29wZSl7ai5mYWlsdXJlKGEpO31lbHNle2ouZmFpbHVyZS5hcHBseShqLnNjb3BlLFthXSk7fX19dGhpcy5mYWlsdXJlRXZlbnQuZmlyZShhKTtpZihiLmZhaWx1cmVFdmVudCl7Yi5mYWlsdXJlRXZlbnQuZmlyZShhKTt9fXRoaXMucmVsZWFzZU9iamVjdChiKTthPW51bGw7fSxjcmVhdGVSZXNwb25zZU9iamVjdDpmdW5jdGlvbihhLGgpe3ZhciBkPXt9LGs9e30sZixjLGcsYjt0cnl7Yz1hLmNvbm4uZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCk7Zz1jLnNwbGl0KCJcbiIpO2ZvcihmPTA7ZjxnLmxlbmd0aDtmKyspe2I9Z1tmXS5pbmRleE9mKCI6Iik7aWYoYiE9LTEpe2tbZ1tmXS5zdWJzdHJpbmcoMCxiKV09WUFIT08ubGFuZy50cmltKGdbZl0uc3Vic3RyaW5nKGIrMikpO3M9Z1tmXS5zdWJzdHJpbmcoMCxiKTtzPXMucmVwbGFjZSgvKFx3KShcdyopL2csZnVuY3Rpb24obCxpLGUpe3JldHVybiBpLnRvVXBwZXJDYXNlKCkrZS50b0xvd2VyQ2FzZSgpO30pO2tbc109WUFIT08ubGFuZy50cmltKGdbZl0uc3Vic3RyaW5nKGIrMikpO319fWNhdGNoKGope31kLnRJZD1hLnRJZDtkLnN0YXR1cz0oYS5jb25uLnN0YXR1cz09MTIyMyk/MjA0OmEuY29ubi5zdGF0dXM7ZC5zdGF0dXNUZXh0PShhLmNvbm4uc3RhdHVzPT0xMjIzKT8iTm8gQ29udGVudCI6YS5jb25uLnN0YXR1c1RleHQ7ZC5nZXRSZXNwb25zZUhlYWRlcj1rO2QuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzPWM7ZC5yZXNwb25zZVRleHQ9YS5jb25uLnJlc3BvbnNlVGV4dDtkLnJlc3BvbnNlWE1MPWEuY29ubi5yZXNwb25zZVhNTDtpZihoKXtkLmFyZ3VtZW50PWg7fXJldHVybiBkO30sY3JlYXRlRXhjZXB0aW9uT2JqZWN0OmZ1bmN0aW9uKGgsZCxhKXt2YXIgZj0wLGc9ImNvbW11bmljYXRpb24gZmFpbHVyZSIsYz0tMSxiPSJ0cmFuc2FjdGlvbiBhYm9ydGVkIixlPXt9O2UudElkPWg7aWYoYSl7ZS5zdGF0dXM9YztlLnN0YXR1c1RleHQ9Yjt9ZWxzZXtlLnN0YXR1cz1mO2Uuc3RhdHVzVGV4dD1nO31pZihkKXtlLmFyZ3VtZW50PWQ7fXJldHVybiBlO30saW5pdEhlYWRlcjpmdW5jdGlvbihhLGQsYyl7dmFyIGI9KGMpP3RoaXMuX2RlZmF1bHRfaGVhZGVyczp0aGlzLl9odHRwX2hlYWRlcnM7YlthXT1kO2lmKGMpe3RoaXMuX2hhc19kZWZhdWx0X2hlYWRlcnM9dHJ1ZTt9ZWxzZXt0aGlzLl9oYXNfaHR0cF9oZWFkZXJzPXRydWU7fX0sc2V0SGVhZGVyOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKHRoaXMuX2hhc19kZWZhdWx0X2hlYWRlcnMpe2ZvcihiIGluIHRoaXMuX2RlZmF1bHRfaGVhZGVycyl7aWYoWUFIT08ubGFuZy5oYXNPd25Qcm9wZXJ0eSh0aGlzLl9kZWZhdWx0X2hlYWRlcnMsYikpe2EuY29ubi5zZXRSZXF1ZXN0SGVhZGVyKGIsdGhpcy5fZGVmYXVsdF9oZWFkZXJzW2JdKTsKfX19aWYodGhpcy5faGFzX2h0dHBfaGVhZGVycyl7Zm9yKGIgaW4gdGhpcy5faHR0cF9oZWFkZXJzKXtpZihZQUhPTy5sYW5nLmhhc093blByb3BlcnR5KHRoaXMuX2h0dHBfaGVhZGVycyxiKSl7YS5jb25uLnNldFJlcXVlc3RIZWFkZXIoYix0aGlzLl9odHRwX2hlYWRlcnNbYl0pO319dGhpcy5faHR0cF9oZWFkZXJzPXt9O3RoaXMuX2hhc19odHRwX2hlYWRlcnM9ZmFsc2U7fX0scmVzZXREZWZhdWx0SGVhZGVyczpmdW5jdGlvbigpe3RoaXMuX2RlZmF1bHRfaGVhZGVycz17fTt0aGlzLl9oYXNfZGVmYXVsdF9oZWFkZXJzPWZhbHNlO30sYWJvcnQ6ZnVuY3Rpb24oZSxnLGEpe3ZhciBkLGI9KGcmJmcuYXJndW1lbnQpP2cuYXJndW1lbnQ6bnVsbDtlPWV8fHt9O2lmKGUuY29ubil7aWYoZS54aHIpe2lmKHRoaXMuaXNDYWxsSW5Qcm9ncmVzcyhlKSl7ZS5jb25uLmFib3J0KCk7d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fcG9sbFtlLnRJZF0pO2RlbGV0ZSB0aGlzLl9wb2xsW2UudElkXTtpZihhKXt3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVPdXRbZS50SWRdKTtkZWxldGUgdGhpcy5fdGltZU91dFtlLnRJZF07fWQ9dHJ1ZTt9fWVsc2V7aWYoZS54ZHIpe2UuY29ubi5hYm9ydChlLnRJZCk7ZD10cnVlO319fWVsc2V7aWYoZS51cGxvYWQpe3ZhciBjPSJ5dWlJTyIrZS50SWQ7dmFyIGY9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYyk7aWYoZil7WUFIT08udXRpbC5FdmVudC5yZW1vdmVMaXN0ZW5lcihmLCJsb2FkIik7ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChmKTtpZihhKXt3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVPdXRbZS50SWRdKTtkZWxldGUgdGhpcy5fdGltZU91dFtlLnRJZF07fWQ9dHJ1ZTt9fWVsc2V7ZD1mYWxzZTt9fWlmKGQ9PT10cnVlKXt0aGlzLmFib3J0RXZlbnQuZmlyZShlLGIpO2lmKGUuYWJvcnRFdmVudCl7ZS5hYm9ydEV2ZW50LmZpcmUoZSxiKTt9dGhpcy5oYW5kbGVUcmFuc2FjdGlvblJlc3BvbnNlKGUsZyx0cnVlKTt9cmV0dXJuIGQ7fSxpc0NhbGxJblByb2dyZXNzOmZ1bmN0aW9uKGEpe2E9YXx8e307aWYoYS54aHImJmEuY29ubil7cmV0dXJuIGEuY29ubi5yZWFkeVN0YXRlIT09NCYmYS5jb25uLnJlYWR5U3RhdGUhPT0wO31lbHNle2lmKGEueGRyJiZhLmNvbm4pe3JldHVybiBhLmNvbm4uaXNDYWxsSW5Qcm9ncmVzcyhhLnRJZCk7fWVsc2V7aWYoYS51cGxvYWQ9PT10cnVlKXtyZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInl1aUlPIithLnRJZCk/dHJ1ZTpmYWxzZTt9ZWxzZXtyZXR1cm4gZmFsc2U7fX19fSxyZWxlYXNlT2JqZWN0OmZ1bmN0aW9uKGEpe2lmKGEmJmEuY29ubil7YS5jb25uPW51bGw7YT1udWxsO319fTsoZnVuY3Rpb24oKXt2YXIgZz1ZQUhPTy51dGlsLkNvbm5lY3QsaD17fTtmdW5jdGlvbiBkKGkpe3ZhciBqPSc8b2JqZWN0IGlkPSJZVUlDb25uZWN0aW9uU3dmIiB0eXBlPSJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaCIgZGF0YT0iJytpKyciIHdpZHRoPSIwIiBoZWlnaHQ9IjAiPicrJzxwYXJhbSBuYW1lPSJtb3ZpZSIgdmFsdWU9IicraSsnIj4nKyc8cGFyYW0gbmFtZT0iYWxsb3dTY3JpcHRBY2Nlc3MiIHZhbHVlPSJhbHdheXMiPicrIjwvb2JqZWN0PiIsaz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGspO2suaW5uZXJIVE1MPWo7fWZ1bmN0aW9uIGIobCxpLGosbixrKXtoW3BhcnNlSW50KGwudElkKV09eyJvIjpsLCJjIjpufTtpZihrKXtuLm1ldGhvZD1pO24uZGF0YT1rO31sLmNvbm4uc2VuZChqLG4sbC50SWQpO31mdW5jdGlvbiBlKGkpe2QoaSk7Zy5fdHJhbnNwb3J0PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJZVUlDb25uZWN0aW9uU3dmIik7fWZ1bmN0aW9uIGMoKXtnLnhkclJlYWR5RXZlbnQuZmlyZSgpO31mdW5jdGlvbiBhKGosaSl7aWYoail7Zy5zdGFydEV2ZW50LmZpcmUoaixpLmFyZ3VtZW50KTtpZihqLnN0YXJ0RXZlbnQpe2ouc3RhcnRFdmVudC5maXJlKGosaS5hcmd1bWVudCk7fX19ZnVuY3Rpb24gZihqKXt2YXIgaz1oW2oudElkXS5vLGk9aFtqLnRJZF0uYztpZihqLnN0YXR1c1RleHQ9PT0ieGRyOnN0YXJ0Iil7YShrLGkpO3JldHVybjt9ai5yZXNwb25zZVRleHQ9ZGVjb2RlVVJJKGoucmVzcG9uc2VUZXh0KTtrLnI9ajtpZihpLmFyZ3VtZW50KXtrLnIuYXJndW1lbnQ9aS5hcmd1bWVudDt9dGhpcy5oYW5kbGVUcmFuc2FjdGlvblJlc3BvbnNlKGssaSxqLnN0YXR1c1RleHQ9PT0ieGRyOmFib3J0Ij90cnVlOmZhbHNlKTtkZWxldGUgaFtqLnRJZF07fWcueGRyPWI7Zy5zd2Y9ZDtnLnRyYW5zcG9ydD1lO2cueGRyUmVhZHlFdmVudD1uZXcgWUFIT08udXRpbC5DdXN0b21FdmVudCgieGRyUmVhZHkiKTtnLnhkclJlYWR5PWM7Zy5oYW5kbGVYZHJSZXNwb25zZT1mO30pKCk7KGZ1bmN0aW9uKCl7dmFyIGU9WUFIT08udXRpbC5Db25uZWN0LGc9WUFIT08udXRpbC5FdmVudCxhPWRvY3VtZW50LmRvY3VtZW50TW9kZT9kb2N1bWVudC5kb2N1bWVudE1vZGU6ZmFsc2U7ZS5faXNGaWxlVXBsb2FkPWZhbHNlO2UuX2Zvcm1Ob2RlPW51bGw7ZS5fc0Zvcm1EYXRhPW51bGw7ZS5fc3VibWl0RWxlbWVudFZhbHVlPW51bGw7ZS51cGxvYWRFdmVudD1uZXcgWUFIT08udXRpbC5DdXN0b21FdmVudCgidXBsb2FkIik7ZS5faGFzU3VibWl0TGlzdGVuZXI9ZnVuY3Rpb24oKXtpZihnKXtnLmFkZExpc3RlbmVyKGRvY3VtZW50LCJjbGljayIsZnVuY3Rpb24oayl7dmFyIGo9Zy5nZXRUYXJnZXQoayksaT1qLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYoKGk9PT0iaW5wdXQifHxpPT09ImJ1dHRvbiIpJiYoai50eXBlJiZqLnR5cGUudG9Mb3dlckNhc2UoKT09InN1Ym1pdCIpKXtlLl9zdWJtaXRFbGVtZW50VmFsdWU9ZW5jb2RlVVJJQ29tcG9uZW50KGoubmFtZSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudChqLnZhbHVlKTt9fSk7cmV0dXJuIHRydWU7fXJldHVybiBmYWxzZTt9KCk7ZnVuY3Rpb24gaCh3LHIsbSl7dmFyIHYsbCx1LHMseix0PWZhbHNlLHA9W10seT0wLG8scSxuLHgsazt0aGlzLnJlc2V0Rm9ybVN0YXRlKCk7aWYodHlwZW9mIHc9PSJzdHJpbmciKXt2PShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh3KXx8ZG9jdW1lbnQuZm9ybXNbd10pO31lbHNle2lmKHR5cGVvZiB3PT0ib2JqZWN0Iil7dj13O31lbHNle3JldHVybjt9fWlmKHIpe3RoaXMuY3JlYXRlRnJhbWUobT9tOm51bGwpO3RoaXMuX2lzRm9ybVN1Ym1pdD10cnVlO3RoaXMuX2lzRmlsZVVwbG9hZD10cnVlO3RoaXMuX2Zvcm1Ob2RlPXY7cmV0dXJuO31mb3Iobz0wLHE9di5lbGVtZW50cy5sZW5ndGg7bzxxOysrbyl7bD12LmVsZW1lbnRzW29dO3o9bC5kaXNhYmxlZDt1PWwubmFtZTtpZigheiYmdSl7dT1lbmNvZGVVUklDb21wb25lbnQodSkrIj0iO3M9ZW5jb2RlVVJJQ29tcG9uZW50KGwudmFsdWUpO3N3aXRjaChsLnR5cGUpe2Nhc2Uic2VsZWN0LW9uZSI6aWYobC5zZWxlY3RlZEluZGV4Pi0xKXtrPWwub3B0aW9uc1tsLnNlbGVjdGVkSW5kZXhdO3BbeSsrXT11K2VuY29kZVVSSUNvbXBvbmVudCgoay5hdHRyaWJ1dGVzLnZhbHVlJiZrLmF0dHJpYnV0ZXMudmFsdWUuc3BlY2lmaWVkKT9rLnZhbHVlOmsudGV4dCk7fWJyZWFrO2Nhc2Uic2VsZWN0LW11bHRpcGxlIjppZihsLnNlbGVjdGVkSW5kZXg+LTEpe2ZvcihuPWwuc2VsZWN0ZWRJbmRleCx4PWwub3B0aW9ucy5sZW5ndGg7bjx4Oysrbil7az1sLm9wdGlvbnNbbl07aWYoay5zZWxlY3RlZCl7cFt5KytdPXUrZW5jb2RlVVJJQ29tcG9uZW50KChrLmF0dHJpYnV0ZXMudmFsdWUmJmsuYXR0cmlidXRlcy52YWx1ZS5zcGVjaWZpZWQpP2sudmFsdWU6ay50ZXh0KTt9fX1icmVhaztjYXNlInJhZGlvIjpjYXNlImNoZWNrYm94IjppZihsLmNoZWNrZWQpe3BbeSsrXT11K3M7fWJyZWFrO2Nhc2UiZmlsZSI6Y2FzZSB1bmRlZmluZWQ6Y2FzZSJyZXNldCI6Y2FzZSJidXR0b24iOmJyZWFrO2Nhc2Uic3VibWl0IjppZih0PT09ZmFsc2Upe2lmKHRoaXMuX2hhc1N1Ym1pdExpc3RlbmVyJiZ0aGlzLl9zdWJtaXRFbGVtZW50VmFsdWUpe3BbeSsrXT10aGlzLl9zdWJtaXRFbGVtZW50VmFsdWU7fXQ9dHJ1ZTt9YnJlYWs7ZGVmYXVsdDpwW3krK109dStzO319fXRoaXMuX2lzRm9ybVN1Ym1pdD10cnVlO3RoaXMuX3NGb3JtRGF0YT1wLmpvaW4oIiYiKTt0aGlzLmluaXRIZWFkZXIoIkNvbnRlbnQtVHlwZSIsdGhpcy5fZGVmYXVsdF9mb3JtX2hlYWRlcik7cmV0dXJuIHRoaXMuX3NGb3JtRGF0YTt9ZnVuY3Rpb24gZCgpe3RoaXMuX2lzRm9ybVN1Ym1pdD1mYWxzZTt0aGlzLl9pc0ZpbGVVcGxvYWQ9ZmFsc2U7dGhpcy5fZm9ybU5vZGU9bnVsbDt0aGlzLl9zRm9ybURhdGE9IiI7fWZ1bmN0aW9uIGMoaSl7dmFyIGo9Inl1aUlPIit0aGlzLl90cmFuc2FjdGlvbl9pZCxsPShhPT09OSk/dHJ1ZTpmYWxzZSxrO2lmKFlBSE9PLmVudi51YS5pZSYmIWwpe2s9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnPGlmcmFtZSBpZD0iJytqKyciIG5hbWU9IicraisnIiAvPicpO2lmKHR5cGVvZiBpPT0iYm9vbGVhbiIpe2suc3JjPSJqYXZhc2NyaXB0OmZhbHNlIjt9fWVsc2V7az1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTtrLmlkPWo7ay5uYW1lPWo7fWsuc3R5bGUucG9zaXRpb249ImFic29sdXRlIjtrLnN0eWxlLnRvcD0iLTEwMDBweCI7ay5zdHlsZS5sZWZ0PSItMTAwMHB4Ijtkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGspO31mdW5jdGlvbiBmKGope3ZhciBtPVtdLGs9ai5zcGxpdCgiJiIpLGwsbjtmb3IobD0wO2w8ay5sZW5ndGg7bCsrKXtuPWtbbF0uaW5kZXhPZigiPSIpO2lmKG4hPS0xKXttW2xdPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7bVtsXS50eXBlPSJoaWRkZW4iO21bbF0ubmFtZT1kZWNvZGVVUklDb21wb25lbnQoa1tsXS5zdWJzdHJpbmcoMCxuKSk7bVtsXS52YWx1ZT1kZWNvZGVVUklDb21wb25lbnQoa1tsXS5zdWJzdHJpbmcobisxKSk7dGhpcy5fZm9ybU5vZGUuYXBwZW5kQ2hpbGQobVtsXSk7fX1yZXR1cm4gbTt9ZnVuY3Rpb24gYihtLHksbixsKXt2YXIgdD0ieXVpSU8iK20udElkLHU9Im11bHRpcGFydC9mb3JtLWRhdGEiLHc9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodCkscD0oYT49OCk/dHJ1ZTpmYWxzZSx6PXRoaXMsdj0oeSYmeS5hcmd1bWVudCk/eS5hcmd1bWVudDpudWxsLHgscyxrLHIsaixxO2o9e2FjdGlvbjp0aGlzLl9mb3JtTm9kZS5nZXRBdHRyaWJ1dGUoImFjdGlvbiIpLG1ldGhvZDp0aGlzLl9mb3JtTm9kZS5nZXRBdHRyaWJ1dGUoIm1ldGhvZCIpLHRhcmdldDp0aGlzLl9mb3JtTm9kZS5nZXRBdHRyaWJ1dGUoInRhcmdldCIpfTt0aGlzLl9mb3JtTm9kZS5zZXRBdHRyaWJ1dGUoImFjdGlvbiIsbik7dGhpcy5fZm9ybU5vZGUuc2V0QXR0cmlidXRlKCJtZXRob2QiLCJQT1NUIik7dGhpcy5fZm9ybU5vZGUuc2V0QXR0cmlidXRlKCJ0YXJnZXQiLHQpO2lmKFlBSE9PLmVudi51YS5pZSYmIXApe3RoaXMuX2Zvcm1Ob2RlLnNldEF0dHJpYnV0ZSgiZW5jb2RpbmciLHUpO31lbHNle3RoaXMuX2Zvcm1Ob2RlLnNldEF0dHJpYnV0ZSgiZW5jdHlwZSIsdSk7fWlmKGwpe3g9dGhpcy5hcHBlbmRQb3N0RGF0YShsKTt9dGhpcy5fZm9ybU5vZGUuc3VibWl0KCk7dGhpcy5zdGFydEV2ZW50LmZpcmUobSx2KTtpZihtLnN0YXJ0RXZlbnQpe20uc3RhcnRFdmVudC5maXJlKG0sdik7fWlmKHkmJnkudGltZW91dCl7dGhpcy5fdGltZU91dFttLnRJZF09d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt6LmFib3J0KG0seSx0cnVlKTt9LHkudGltZW91dCk7fWlmKHgmJngubGVuZ3RoPjApe2ZvcihzPTA7czx4Lmxlbmd0aDtzKyspe3RoaXMuX2Zvcm1Ob2RlLnJlbW92ZUNoaWxkKHhbc10pO319Zm9yKGsgaW4gail7aWYoWUFIT08ubGFuZy5oYXNPd25Qcm9wZXJ0eShqLGspKXtpZihqW2tdKXt0aGlzLl9mb3JtTm9kZS5zZXRBdHRyaWJ1dGUoayxqW2tdKTt9ZWxzZXt0aGlzLl9mb3JtTm9kZS5yZW1vdmVBdHRyaWJ1dGUoayk7fX19dGhpcy5yZXNldEZvcm1TdGF0ZSgpOwpxPWZ1bmN0aW9uKCl7dmFyIGksQSxCO2lmKHkmJnkudGltZW91dCl7d2luZG93LmNsZWFyVGltZW91dCh6Ll90aW1lT3V0W20udElkXSk7ZGVsZXRlIHouX3RpbWVPdXRbbS50SWRdO316LmNvbXBsZXRlRXZlbnQuZmlyZShtLHYpO2lmKG0uY29tcGxldGVFdmVudCl7bS5jb21wbGV0ZUV2ZW50LmZpcmUobSx2KTt9cj17dElkOm0udElkLGFyZ3VtZW50OnZ9O3RyeXtpPXcuY29udGVudFdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdO0E9dy5jb250ZW50V2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwcmUiKVswXTtpZihpKXtpZihBKXtCPUEudGV4dENvbnRlbnQ/QS50ZXh0Q29udGVudDpBLmlubmVyVGV4dDt9ZWxzZXtCPWkudGV4dENvbnRlbnQ/aS50ZXh0Q29udGVudDppLmlubmVyVGV4dDt9fXIucmVzcG9uc2VUZXh0PUI7ci5yZXNwb25zZVhNTD13LmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuWE1MRG9jdW1lbnQ/dy5jb250ZW50V2luZG93LmRvY3VtZW50LlhNTERvY3VtZW50OncuY29udGVudFdpbmRvdy5kb2N1bWVudDt9Y2F0Y2gobyl7fWlmKHkmJnkudXBsb2FkKXtpZigheS5zY29wZSl7eS51cGxvYWQocik7fWVsc2V7eS51cGxvYWQuYXBwbHkoeS5zY29wZSxbcl0pO319ei51cGxvYWRFdmVudC5maXJlKHIpO2lmKG0udXBsb2FkRXZlbnQpe20udXBsb2FkRXZlbnQuZmlyZShyKTt9Zy5yZW1vdmVMaXN0ZW5lcih3LCJsb2FkIixxKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh3KTt6LnJlbGVhc2VPYmplY3QobSk7fSwxMDApO307Zy5hZGRMaXN0ZW5lcih3LCJsb2FkIixxKTt9ZS5zZXRGb3JtPWg7ZS5yZXNldEZvcm1TdGF0ZT1kO2UuY3JlYXRlRnJhbWU9YztlLmFwcGVuZFBvc3REYXRhPWY7ZS51cGxvYWRGaWxlPWI7fSkoKTtZQUhPTy5yZWdpc3RlcigiY29ubmVjdGlvbiIsWUFIT08udXRpbC5Db25uZWN0LHt2ZXJzaW9uOiIyLjkuMCIsYnVpbGQ6IjI4MDAifSk7"

var isCiscoAppliance = function isCiscoAppliance(){
    return (document.title.match(/Cisco (Cloud )?(Content|Email|Web) Security (Management)?/) !== null);
};

if (isCiscoAppliance()) {
    window.addEventListener('beforescriptexecute',
                            function(event)
                            {
        var originalScript = event.target;

        // debug output of full qualified script url
        console.log('script detected:', originalScript.src);

        // script ends with 'originalscript.js' ?
        // you can test as well: '<full qualified url>' === originalScript.src
        if(/\/connection-min\.js/.test(originalScript.src))
        {
            var replacementScript = document.createElement('script');
            replacementScript.src = NEW_SRC;

            originalScript.parentNode.replaceChild(replacementScript, originalScript);

            // prevent execution of the original script
            event.preventDefault();
        }
    });
}